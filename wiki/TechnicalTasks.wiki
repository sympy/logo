#summary How to work with setup.py, make releases, API documentation, ...

= Introduction =

This wiki describes how to work with setup.py. Help:
{{{
./setup.py --help-commands
}}}
This will print a summary of all commands that `setup.py` understands.

= Cleaning =

To clean the sources (so that `svn st` returns nothing), do 
{{{
./setup.py clean
}}}

= Man page =

The man page is in `doc/man/isympy.1`, and it is generated from the file `doc/man/isympy.xml`. To edit it, edit just the file `doc/man/isympy.xml` and then rebuild the man page with

{{{
  docbook2x-man doc/man/isympy.xml
  mv isympy.1 doc/man/isympy.1
}}}

= Testing dependencies =

Use the `bin/test_pure` file (see the documentation in it).

= Generating the (html) documentation for the api =

== pydoctor ==

In the sympy root directory (where the setup.py is):

{{{
$ pydoctor --make-html --add-package sympy
adding directory sympy
findImportStars
210 / 210 modules parsed 
extractDocstrings
210 / 210 modules parsed 737 warnings 
finalStateComputations
writing html to apidocs using pydoctor.html.SystemWriter
}}}

a new directory `apidoc` is created with the documentation. 

== epydoc ==

Unfortunately, this doesn't work for sympy anymore.

You'll need epydoc (wajig install python-epydoc). (The output is written to ../api/ (you can change this editing the variable gen_doc.target_dir ))

{{{
svn checkout https://sympy.googlecode.com/svn/ sympy --username ondrej.certik
cd sympy/trunk
./setup.py gen_doc
cd ../api
svn propset svn:mime-type text/html *.html
svn ci
}}}

= How to make a new release =

Create a new branch:

{{{
svn checkout https://sympy.googlecode.com/svn/ sympy --username ondrej.certik
cd sympy
svn copy trunk tags/sympy-0.4
}}}

Then in this branch:

{{{
./setup.py sdist
}}}

and put the dist/sympy-0.4-pre.tar.gz on the website.

== Sites to update ==

  * http://code.google.com/p/sympy/wiki/FrontPage
  * http://code.google.com/p/sympy/
  * http://sympy.googlecode.com/svn/api/sympy.html
  * http://en.wikipedia.org/wiki/SymPy
  * http://en.wikipedia.org/wiki/Comparison_of_computer_algebra_systems
  * http://freshmeat.net/projects/sympy/
  * http://pypi.python.org/pypi/SymPy/

= How to make a windows installer =

Start with the source release as described above.

{{{
python setup.py build bdist_wininst
}}}

If all goes well, the resulting exe will be found in .\dist.